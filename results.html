<head>
<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
<link href='style.css' rel='stylesheet' type='text/css'>
<title>8values Results</title>
<link rel="icon" type="x-icon" href="icon.png">
<link rel="shortcut icon" type="x-icon" href="icon.png">
<meta charset="utf-8">
<script>
  version = "Test Edition #1" //Remember to update this before making changes to the test itself!
</script>
</head>
<script type="application/javascript"
        src="ideologies.js">
</script>

<body>
<h1>8values</h1>
<hr>

<h1>Results</h1>

<h2>Femmes Axis: <span class="weight-300" id="femmes-label"></span></h2>
<div class="axis">
    <img id="img-antifeminisme" src="value_images/femmes.svg" height="128pt"/>
    <div class="bar antifeminisme" id="bar-antifeminisme"><div class="text-wrapper" id="antifeminisme"></div></div>
    <div class="bar misogyne" id="bar-misogyne"><div class="text-wrapper" id="misogyne"></div></div>
    <img id="img-misogyne" src="value_images/femmes.svg" height="128pt"/>
</div>
<h2>Handicaps Axis: <span class="weight-300" id="handicaps-label"></span></h2>
<div class="axis">
    <img id="img-transhumanisme" src="value_images/handicaps.svg" height="128pt"/>
    <div class="bar transhumanisme" id="bar-transhumanisme"><div class="text-wrapper" id="transhumanisme"></div></div>
    <div class="bar validisme" id="bar-validisme"><div class="text-wrapper" id="validisme"></div></div>
    <img id="img-validisme" src="value_images/handicaps.svg" height="128pt"/>
</div>
<h2>LGBT Axis: <span class="weight-300" id="lgbt-label"></span></h2>
<div class="axis">
    <img id="img-gay" src="value_images/lgbt.svg" height="128pt"/>
    <div class="bar gay" id="bar-gay"><div class="text-wrapper" id="gay"></div></div>
    <div class="bar homophobe" id="bar-homophobe"><div class="text-wrapper" id="homophobe"></div></div>
    <img id="img-homophobe" src="value_images/lgbt.svg" height="128pt"/>
</div>
<h2>Racisés Axis: <span class="weight-300" id="racises-label"></span></h2>
<div class="axis">
    <img id="img-antiarabe" src="value_images/racises.svg" height="128pt"/>
    <div class="bar antiarabe" id="bar-antiarabe"><div class="text-wrapper" id="antiarabe"></div></div>
    <div class="bar antinoirs" id="bar-antinoirs"><div class="text-wrapper" id="antinoirs"></div></div>
    <img id="img-antinoirs" src="value_images/racises.svg" height="128pt"/>
</div>
<h2>Religions Axis: <span class="weight-300" id="religions-label"></span></h2>
<div class="axis">
    <img id="img-islamophobe" src="value_images/religions.svg" height="128pt"/>
    <div class="bar islamophobe" id="bar-islamophobe"><div class="text-wrapper" id="islamophobe"></div></div>
    <div class="bar antisemite" id="bar-antisemite"><div class="text-wrapper" id="antisemite"></div></div>
    <img id="img-antisemite" src="value_images/religions.svg" height="128pt"/>
</div>
<h2>Société Axis: <span class="weight-300" id="societe-label"></span></h2>
<div class="axis">
    <img id="img-antiwokisme" src="value_images/societe.svg" height="128pt"/>
    <div class="bar antiwokisme" id="bar-antiwokisme"><div class="text-wrapper" id="antiwokisme"></div></div>
    <div class="bar fascisme" id="bar-fascisme"><div class="text-wrapper" id="fascisme"></div></div>
    <img id="img-fascisme" src="value_images/societe.svg" height="128pt"/>
</div>
<h2>Closest Match: <span class="weight-300" id="ideology-label"></span></h2>
<p>Ideological matching is a work in progress, and is much less accurate than the values and axes.</p>
<p>You can send these results by copying and pasting the URL at the top of the page or using the image below. Think your matched ideology was wrong? Want to help us calibrate the test? Send the results along with your political ideology to us at eightvalues@gmail.com, or send us any comments, questions, or criticism. </p>
<hr/>
<img src="" id="banner">
<button class="button" onclick="location.href='index.html';">Back</button> <br>
<!-- Website visit statistics - no personal information is collected! -->
<script type="text/javascript">
var sc_project=11325211;
var sc_invisible=1;
var sc_security="fd9f0659";
var scJsHost = (("https:" == document.location.protocol) ?
"https://secure." : "http://www.");
document.write("<sc"+"ript type='text/javascript' src='" +
scJsHost+
"statcounter.com/counter/counter.js'></"+"script>");
</script>
<noscript><div class="statcounter"><a title="web stats"
href="http://statcounter.com/" target="_blank"><img
class="statcounter"
src="//c.statcounter.com/11325211/0/fd9f0659/1/" alt="web
stats"></a></div></noscript>
<script>
    function getQueryVariable(variable)
    {
           var query = window.location.search.substring(1)
           var vars = query.split("&")
           for (var i=0;i<vars.length;i++) {
                   var pair = vars[i].split("=")
                   if(pair[0] == variable) {return pair[1]}
           }
           return(NaN);
    }

    function setBarValue(name, value) {
        innerel = document.getElementById(name)
        outerel = document.getElementById("bar-" + name)
        outerel.style.width = (value + "%")
        innerel.innerHTML = (value + "%")
        if (innerel.offsetWidth + 20 > outerel.offsetWidth) {
            innerel.style.visibility = "hidden"
        }
    }

    femmesArray = ["Antiféminisme","Très Antiféminisme","Antiféminisme","Neutre","Misogyne","Très Misogyne","Extrêmement Misogyne"]
    handicapsArray = ["Transhumanisme","Très Transhumanisme","Transhumanisme","Neutre","Validiste","Très Validiste","Extrêmement Validiste"]
    lgbtArray = ["Gay","Très Gay","Gay","Neutre","Homophobe","Très Homophobe","Extrêmement Homophobe"]
    racisésArray = ["Antiarabe","Très Antiarabe","Antiarabe","Neutre","Antinoirs","Très Antinoirs","Extrêmement Antinoirs"]
    religionsArray = ["Islamophobe","Très Islamophobe","Islamophobe","Neutre","Antisémite","Très Antisémite","Extrêmement Antisémite"]
    societeArray = ["Antiwokisme","Très Antiwokisme","Antiwokisme","Neutre","Fasciste","Très Fasciste","Extrêmement Fasciste"]

    function setLabel(val,ary) {
        if (val > 100) { return "" } else
        if (val > 90) { return ary[0] } else
        if (val > 75) { return ary[1] } else
        if (val > 60) { return ary[2] } else
        if (val >= 40) { return ary[3] } else
        if (val >= 25) { return ary[4] } else
        if (val >= 10) { return ary[5] } else
        if (val >= 0) { return ary[6] } else
        	{return ""}
    }

    femmes  = parseFloat(getQueryVariable("f"))
    handicaps  = parseFloat(getQueryVariable("h"))
    lgbt    = parseFloat(getQueryVariable("l"))
    racisés = parseFloat(getQueryVariable("r"))
    religions   = parseFloat(getQueryVariable("re"))
    societe   = parseFloat(getQueryVariable("s"))
    antifeminisme = (100 - femmes).toFixed(1)
    transhumanisme = (100 - handicaps).toFixed(1)
    gay = (100 - lgbt).toFixed(1)
    antiarabe = (100 - racisés).toFixed(1)
    islamophobe = (100 - religions).toFixed(1)
    antiwokisme = (100 - societe).toFixed(1)

    setBarValue("antifeminisme", antifeminisme)
    setBarValue("misogyne", femmes)
    setBarValue("transhumanisme", transhumanisme)
    setBarValue("validisme", handicaps)
    setBarValue("gay", gay)
    setBarValue("homophobe", lgbt)
    setBarValue("antiarabe", antiarabe)
    setBarValue("antinoirs", racisés)
    setBarValue("islamophobe", islamophobe)
    setBarValue("antisemite", religions)
    setBarValue("antiwokisme", antiwokisme)
    setBarValue("fascisme", societe)

    document.getElementById("femmes-label").innerHTML = setLabel(femmes, femmesArray)
    document.getElementById("handicaps-label").innerHTML = setLabel(handicaps, handicapsArray)
    document.getElementById("lgbt-label").innerHTML = setLabel(lgbt, lgbtArray)
    document.getElementById("racises-label").innerHTML = setLabel(racisés, racisésArray)
    document.getElementById("religions-label").innerHTML = setLabel(religions, religionsArray)
    document.getElementById("societe-label").innerHTML = setLabel(societe, societeArray)

    ideology = ""
    ideodist = Infinity
    for (var i = 0; i < ideologies.length; i++) {
        dist = 0
        dist += Math.pow(Math.abs(ideologies[i].stats.femmes - femmes), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.racises - racisés), 2)
        dist += Math.pow(Math.abs(ideologies[i].stats.handicaps - handicaps), 1.73856063)
        dist += Math.pow(Math.abs(ideologies[i].stats.lgbt - lgbt), 1.73856063)
        dist += Math.pow(Math.abs(ideologies[i].stats.religions - religions), 1.73856063)
        dist += Math.pow(Math.abs(ideologies[i].stats.societe - societe), 1.73856063)
        if (dist < ideodist) {
            ideology = ideologies[i].name
            ideodist = dist
        }
    }
    document.getElementById("ideology-label").innerHTML = ideology

    function createImage(src, x, y, w, h) {
        img = new Image ()
        img.src = src
        img.onLoad = function() {
            ctx.drawImage(img, x, y, w, h)
        }
    }

    window.onload = function() {
        var c = document.createElement("canvas")
        var ctx = c.getContext("2d")
        c.width = 800;
        c.height = 900;
        ctx.fillStyle = "#EEEEEE"
        ctx.fillRect(0,0,800,900);

        var yPositions = [170, 250, 330, 410, 490, 570];
        var leftImgIds = ["antifeminisme", "transhumanisme", "gay", "antiarabe", "islamophobe", "antiwokisme"];
        var rightImgIds = ["misogyne", "validisme", "homophobe", "antinoirs", "antisemite", "fascisme"];
        var axisValues = [femmes, handicaps, lgbt, racisés, religions, societe];
        var antiAxisValues = [antifeminisme, transhumanisme, gay, antiarabe, islamophobe, antiwokisme];
        var axisLabels = ["Femmes", "Handicaps", "LGBT", "Racisés", "Religions", "Société"];

        for (var i = 0; i < 6; i++) {
            var yPos = yPositions[i];
            img = document.getElementById("img-" + leftImgIds[i])
            if (img) ctx.drawImage(img, 20, yPos, 100, 80);
            img = document.getElementById("img-" + rightImgIds[i])
            if (img) ctx.drawImage(img, 680, yPos, 100, 80)

            ctx.fillStyle="#222222"
            ctx.fillRect(120, yPos + 10, 560, 60)
            ctx.fillStyle="#f44336"
            ctx.fillRect(120, yPos + 14, 5.6*antiAxisValues[i]-2, 52)
            ctx.fillStyle="#00897b"
            ctx.fillRect(682-5.6*axisValues[i], yPos + 14, 5.6*axisValues[i]-2, 52)
        }

        ctx.fillStyle="#222222"
        ctx.font="700 80px Montserrat"
        ctx.textAlign="left"
        ctx.fillText("8values", 20, 90)
        ctx.font="50px Montserrat"
        ctx.fillText(ideology, 20, 140)

        ctx.textAlign="left"
        for (var i = 0; i < 6; i++) {
            if (antiAxisValues[i] > 30) {
                ctx.fillText(antiAxisValues[i] + "%", 130, yPositions[i] + 47.5)
            }
        }
        ctx.textAlign="right"
        for (var i = 0; i < 6; i++) {
            if (axisValues[i] > 30) {
                ctx.fillText(axisValues[i] + "%", 670, yPositions[i] + 47.5)
            }
        }

        ctx.font="300 30px Montserrat"
        ctx.fillText("8values.github.io", 780, 60)
		ctx.fillText(version, 780, 90)
        ctx.textAlign="center"
        ctx.font="300 20px Montserrat"
        var labelIds = ["femmes", "handicaps", "lgbt", "racises", "religions", "societe"];
        for (var i = 0; i < 6; i++) {
            var labelEl = document.getElementById(labelIds[i] + "-label")
            if (labelEl) {
                ctx.fillText(axisLabels[i] + " Axis: " + labelEl.innerHTML, 400, yPositions[i] + 5)
            }
        }

        document.getElementById("banner").src = c.toDataURL();
    }
    </script>
</body>
